---
sidebar_position: 4
sidebar_label: DEFINE BUCKET
title: DEFINE BUCKET statement | SurrealQL
description: A DEFINE BUCKET statement can be used to set endpoints with custom middleware and permissions.
---
import Since from '@components/shared/Since.astro'


# DEFINE BUCKET statement

The `DEFINE BUCKET` statement lets you create a bucket that can hold files.

<Since v="v2.3.0" />

## Statement syntax

```syntax title="SurrealQL Syntax"
DEFINE BUCKET [ OVERWRITE | IF NOT EXISTS ] @name [ @backend ]
PERMISSIONS @expression [ COMMENT @string ]
```

## Example usage

The simplest way to experiment with a bucket for files is by using the memory backend:

```surql
DEFINE BUCKET my_bucket BACKEND "memory:";
```

Once this is defined, `my_bucket` can be accessed by using a file pointer: a path prefixed by an `f`.

```surql
-- Create a file by adding some content
f"my_bucket:/my_book.txt".put("Once there were four children whose names were Peter, Susan, Edmund, and Lucy.");
-- Copy it to a new file name
f"my_bucket:/my_book.txt".copy("lion_witch_wardrobe.txt");
-- Read the file as bytes
f"my_bucket:/lion_witch_wardrobe.txt".get();
-- Cast the bytes to a string
<string>f"my_bucket:/lion_witch_wardrobe.txt".get();
```

```surql title="Output"
-------- Query --------

encoding::base64::decode("T25jZSB0aGVyZSB3ZXJlIGZvdXIgY2hpbGRyZW4gd2hvc2UgbmFtZXMgd2VyZSBQZXRlciwgU3VzYW4sIEVkbXVuZCwgYW5kIEx1Y3ku")

-------- Query --------

'Once there were four children whose names were Peter, Susan, Edmund, and Lucy.'
```

If no backend is selected, the database will search for the environment variable `SURREAL_GLOBAL_BUCKET` and assign this as the global bucket. In this case, files will have a `namespace/database` prefix added (e.g. `my_global_bucket:/test_ns/test_db/somefile.txt`). A second `SURREAL_GLOBAL_BUCKET_ENFORCED` environment variable can also be used, which when set to `true` will enforce usage of the global bucket.

```surql
DEFINE BUCKET my_bucket;
```

```surql
-- Writes to e.g. `my_global_bucket:/test_ns/test_db/my_bucket/my_book.txt`
f"my_bucket:/my_book.txt".put("Once there were four children whose names were Peter, Susan, Edmund, and Lucy.");
```